FROM rabbitmq:3.8.3-management

ARG RABBITMQ_COOKIE
ARG RABBITMQ_USERNAME
ARG RABBITMQ_PASSWORD

ENV RABBITMQ_ERLANG_COOKIE=${RABBITMQ_COOKIE}
ENV RABBITMQ_DEFAULT_USER=${RABBITMQ_USERNAME}
ENV RABBITMQ_DEFAULT_PASS=${RABBITMQ_PASSWORD}

COPY healthcheck.sh /home/healthcheck.sh

HEALTHCHECK CMD ["chmod", "+x", "/home/healthcheck.sh"]

EXPOSE 15672
